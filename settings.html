
<!DOCTYPE html>
<html lang="ru">
<head>
     <!-- Существующие мета-теги -->
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta charset="utf-8" />
    <meta name="theme-color" content="#E5E5E5" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicons/favicon-192x192.png">
    <link rel="icon" type="image/png" sizes="48x48" href="assets/favicons/favicon-48x48.png">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/favicons/favicon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="assets/favicons/favicon-512x512.png">
    <link rel="shortcut icon" href="assets/favicons/favicon-48x48.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="assets/favicons/site.webmanifest">

    <!-- Прочие импорты -->
    <link rel="stylesheet" href="css/default.css">
    <link rel="stylesheet" href="css/settings.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tektur:wght@400..900&family=Unbounded:wght@200..900&display=swap" rel="stylesheet">
    <title>Corrx - Настройки</title>
</head>
<body>
    <div class="settings-container">
        <!-- Header -->
        <header class="settings-header">
            <a href="dashboard.html" class="back-btn" aria-label="Назад">
                <img src="assets/icons/chevron-left.svg" alt="Назад">
            </a>
            <h1 class="page-title">Настройки</h1>
            <div class="header-placeholder"></div>
        </header>

        <main class="settings-main">
            <!-- Информация о пользователе -->
            <section class="settings-section">
                <div class="user-info-card">
                    <div class="user-avatar">
                        <img src="assets/icons/user.svg" alt="Аватар">
                    </div>
                    <div class="user-details">
                        <h2 id="userName">Загрузка...</h2>
                        <p id="userRole">Пользователь</p>
                        <p class="user-phone" id="userPhone"></p>
                        <p class="user-email" id="userEmail"></p>
                    </div>
                    <button class="edit-profile-btn" id="editProfileBtn">
                        <img src="assets/icons/settings.svg" alt="Редактировать">
                    </button>
                </div>
            </section>

            <!-- Настройки приложения -->
            <section class="settings-section">
                <h2 class="section-title">Приложение</h2>
                <div class="settings-list">
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-title">Авто-выход</span>
                            <span class="setting-description">Выход через 30 минут неактивности</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" class="toggle-input" id="autoLogoutToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-title">Кэширование данных</span>
                            <span class="setting-description">Сохранять сметы локально</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" class="toggle-input" id="cachingToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </section>

            <!-- Аккаунт -->
            <section class="settings-section">
                <h2 class="section-title">Аккаунт</h2>
                <div class="settings-list">
                    <button class="setting-item clickable" id="createUserBtn">
                        <div class="setting-info">
                            <span class="setting-title">Создать пользователя</span>
                            <span class="setting-description">Добавить нового пользователя</span>
                        </div>
                        <img src="assets/icons/user_add.svg" alt="Создать пользователя" class="setting-icon">
                    </button>
                    <button class="setting-item clickable" id="securityBtn">
                        <div class="setting-info">
                            <span class="setting-title">Безопасность</span>
                            <span class="setting-description">Смена пароля</span>
                        </div>
                        <img src="assets/icons/lock-close.svg" alt="Безопасность" class="setting-icon">
                    </button>
                    <button class="setting-item clickable" id="exportDataBtn">
                        <div class="setting-info">
                            <span class="setting-title">Экспорт данных</span>
                            <span class="setting-description">Скачать все сметы</span>
                        </div>
                        <img src="assets/icons/download.svg" alt="Экспорт" class="setting-icon">
                    </button>
                    <button class="setting-item clickable" id="clearCacheBtn">
                        <div class="setting-info">
                            <span class="setting-title">Очистить кэш</span>
                            <span class="setting-description">Удалить локальные данные</span>
                        </div>
                        <img src="assets/icons/trash.svg" alt="Очистить" class="setting-icon">
                    </button>
                </div>
            </section>

            <!-- Поддержка -->
            <section class="settings-section">
                <h2 class="section-title">Поддержка</h2>
                <div class="settings-list">
                    <button class="setting-item clickable" id="sendReportBtn">
                        <div class="setting-info">
                            <span class="setting-title">Сообщить об ошибке</span>
                            <span class="setting-description">Отправить отчет разработчикам</span>
                        </div>
                        <img src="assets/icons/chevron-right.svg" alt="Отчет" class="setting-icon">
                    </button>
                    <button class="setting-item clickable" id="debugBtn">
                        <div class="setting-info">
                            <span class="setting-title">Информация о системе</span>
                            <span class="setting-description">Технические данные</span>
                        </div>
                        <img src="assets/icons/info.svg" alt="Информация" class="setting-icon">
                    </button>
                </div>
            </section>

            <!-- Выход -->
            <section class="settings-section">
                <div class="settings-list">
                    <button class="logout-btn" id="logoutButton">
                        <img src="assets/icons/logout.svg" alt="Выйти">
                        <span>Выйти из аккаунта</span>
                    </button>
                </div>
            </section>

            <!-- Информация о приложении -->
            <div class="app-info">
                <p class="app-version">Corrx v1.0.0</p>
                <p class="app-copyright">© 2024 Все права защищены</p>
            </div>
        </main>
    </div>

    <!-- Модальное окно редактирования профиля -->
    <div id="editProfileModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Редактирование профиля</h3>
                <button class="close-modal" id="closeEditProfileModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <div class="input_container">
                        <img src="assets/icons/user.svg" alt="Имя">
                        <input class="input_area" id="editFullName" placeholder="Полное имя">
                    </div>
                    <div class="input_container">
                        <img src="assets/icons/mail.svg" alt="Email">
                        <input class="input_area" id="editEmail" type="email" placeholder="Email">
                    </div>
                    <div class="input_container">
                        <img src="assets/icons/phone.svg" alt="Телефон">
                        <input class="input_area" id="editPhone" type="tel" placeholder="Телефон">
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="modal-button secondary" id="cancelEditProfile">Отмена</button>
                    <button class="modal-button primary" id="saveProfile">Сохранить</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно создания пользователя -->
    <div id="createUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Создание нового пользователя</h3>
                <button class="close-modal" id="closeCreateUserModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <div class="input_container">
                        <img src="assets/icons/user.svg" alt="Логин">
                        <input class="input_area" id="createUsername" placeholder="Логин" required>
                    </div>
                    <div class="input_container">
                        <img src="assets/icons/lock-close.svg" alt="Пароль">
                        <input class="input_area" id="createPassword" type="password" placeholder="Пароль">
                    </div>
                    <div class="input_container">
                        <img src="assets/icons/lock-close.svg" alt="Повторите пароль">
                        <input class="input_area" id="confirmCreatePassword" type="password" placeholder="Повторите пароль">
                    </div>
                    <div class="input_container">
                        <img src="assets/icons/user.svg" alt="Имя">
                        <input class="input_area" id="createFullName" placeholder="Полное имя">
                    </div>
                    <div class="input_container">
                        <img src="assets/icons/mail.svg" alt="Email">
                        <input class="input_area" id="createEmail" type="email" placeholder="Email">
                    </div>
                    <div class="input_container">
                        <img src="assets/icons/phone.svg" alt="Телефон">
                        <input class="input_area" id="createPhone" type="tel" placeholder="Телефон">
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="modal-button secondary" id="cancelCreateUser">Отмена</button>
                    <button class="modal-button primary" id="createUser">Создать</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно безопасности -->
    <div id="securityModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Безопасность</h3>
                <button class="close-modal" id="closeSecurityModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <div class="input_container">
                        <img src="assets/icons/lock-close.svg" alt="Текущий пароль">
                        <input class="input_area" id="currentPassword" type="password" placeholder="Текущий пароль" required>
                    </div>
                    <div class="input_container">
                        <img src="assets/icons/lock-close.svg" alt="Новый пароль">
                        <input class="input_area" id="newPassword" type="password" placeholder="Новый пароль">
                    </div>
                    <div class="input_container">
                        <img src="assets/icons/lock-close.svg" alt="Повторите пароль">
                        <input class="input_area" id="confirmPassword" type="password" placeholder="Повторите новый пароль">
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="modal-button secondary" id="cancelSecurity">Отмена</button>
                    <button class="modal-button primary" id="changePassword">Сменить пароль</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно подтверждения выхода -->
    <div id="logoutModal" class="modal">
        <div class="modal-content">
            <h3>Подтверждение выхода</h3>
            <p>Вы уверены, что хотите выйти из аккаунта?</p>
            <div class="modal-actions">
                <button class="modal-button secondary" id="cancelLogout">Отмена</button>
                <button class="modal-button danger" id="confirmLogout">Выйти</button>
            </div>
        </div>
    </div>

    <!-- Модальное окно отправки отчета -->
    <div id="reportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Сообщить об ошибке</h3>
                <button class="close-modal" id="closeReportModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <div class="input_container">
                        <img src="assets/icons/mail.svg" alt="Тема">
                        <input class="input_area" id="reportSubject" placeholder="Тема сообщения" value="Отчет об ошибке">
                    </div>
                    <div class="input_container textarea-container">
                        <img src="assets/icons/write.svg" alt="Описание">
                        <textarea class="input_area textarea" id="reportDescription" placeholder="Опишите проблему подробно..." rows="4"></textarea>
                    </div>
                    <div class="input_container">
                        <img src="assets/icons/user.svg" alt="Контакт">
                        <input class="input_area" id="reportContact" placeholder="Ваш контакт (email/telegram)">
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="modal-button secondary" id="cancelReport">Отмена</button>
                    <button class="modal-button primary" id="sendReport">Отправить отчет</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно информации о системе -->
    <div id="debugModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Информация о системе</h3>
                <button class="close-modal" id="closeDebugModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="info-section">
                    <h4>Приложение</h4>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Версия:</span>
                            <span class="info-value">Corrx v0.5.0</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Сборка:</span>
                            <span class="info-value">2025.01.001</span>
                        </div>
                    </div>
                </div>
                <div class="info-section">
                    <h4>Устройство</h4>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Платформа:</span>
                            <span class="info-value" id="platformInfo"></span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Экран:</span>
                            <span class="info-value" id="screenInfo"></span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Браузер:</span>
                            <span class="info-value" id="browserInfo"></span>
                        </div>
                    </div>
                </div>
                <div class="info-section">
                    <h4>Память</h4>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Локальное хранилище:</span>
                            <span class="info-value" id="storageInfo"></span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Использование памяти:</span>
                            <span class="info-value" id="memoryInfo"></span>
                        </div>
                    </div>
                </div>
                <div class="info-section">
                    <h4>Сессия</h4>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Статус:</span>
                            <span class="info-value" id="sessionStatus"></span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Время входа:</span>
                            <span class="info-value" id="loginTime"></span>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="modal-button secondary" id="refreshDebugInfo">Обновить</button>
                    <button class="modal-button" id="copyDebugInfo">Копировать информацию</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/settings.js"></script>
</body>
</html>
